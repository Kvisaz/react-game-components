import{j as a}from"./jsx-runtime-CkxqCPlQ.js";import{r as l}from"./index-DJO9vBfz.js";import{H as w}from"./index-BaVDV1kO.js";import{T as x}from"./index-BC_UcYdn.js";import{L as p}from"./index-CXOoJ5ln.js";import{M as b}from"./index-bnRFAB63.js";import{b as L,c as u}from"./pomodoroUtils-DTr1miJW.js";import"./index-DrTCKri7.js";const A="_content_1rd72_1",N="_app_pomodoro_1rd72_21",j="_container_1rd72_29",E="_mode_1rd72_47",I="_timer_1rd72_57",M="_controls_1rd72_71",R="_button_1rd72_83",y={content:A,app_pomodoro:N,container:j,mode:E,timer:I,controls:M,button:R},P=(o,c)=>{const[r,n]=l.useState({...o,timeLeft:o.timeLeft*60});return{timerState:r,setTimer:e=>{n(f=>{const d=(e!==void 0?e:f.userLimit)*60;return{...f,lastUsedLimit:d,timeLeft:d}})},resetTimer:()=>{n(e=>({...e,timeLeft:e.resetLimit,isActive:!1}))},toggleTimer:()=>{n(e=>(e.isActive?c(!1,e.startNumber-e.timeLeft):c(!0,0),{...e,startNumber:e.isActive?e.startNumber:e.timeLeft,isActive:!e.isActive}))},reduceTimeLeft:()=>{n(e=>e.timeLeft<=0?(c(!1,e.startNumber-e.timeLeft),{...e,isActive:!1,timeLeft:0}):{...e,timeLeft:e.timeLeft-1})}}},k=(o,c)=>{const r=l.useRef(0),n=l.useRef();l.useEffect(()=>{const m=()=>{const i=Date.now()-r.current;c(),r.current+=1e3;const t=Math.max(0,1e3-i);n.current=setTimeout(m,t)};return o.isActive&&(r.current=Date.now()+1e3,n.current=setTimeout(m,1e3)),()=>n.current&&clearTimeout(n.current)},[o.isActive])},H=(o,c)=>{const[r,n]=l.useState(()=>{try{const s=localStorage.getItem(o);if(s)return JSON.parse(s)}catch(s){console.error(`Error load from localStorage key "${o}":`,s)}return c});return l.useEffect(()=>{try{const s=JSON.stringify(r);localStorage.setItem(o,s)}catch(s){console.error(`Error saving to localStorage key "${o}":`,s)}},[o,r]),{logsState:r,setSession:(s,i)=>{n(t=>{if(s){if(t.length===0||t[t.length-1].dateString!==L(new Date))return[...t,{dateString:L(new Date),time:0,sessions:[{start:u(new Date),end:0,time:0}]}];{const e=t[t.length-1],f=[...e.sessions,{start:u(new Date),end:0,time:0}];return[...t.slice(0,t.length-1),{...e,sessions:f}]}}else{const e=t[t.length-1],f=e.sessions[e.sessions.length-1],d=[...e.sessions.slice(0,e.sessions.length-1),{...f,end:u(new Date),time:i}];return[...t.slice(0,t.length-1),{...e,time:e.time+i,sessions:d}]}})}}},O={timeLeft:5,resetLimit:5,startNumber:5,isActive:!1,builtInLimits:[5,15,30],userLimit:0},D=()=>{const[o,c]=l.useState(!0),{logsState:r,setSession:n}=H("PomadoroLogs",[]),{timerState:m,setTimer:s,resetTimer:i,toggleTimer:t,reduceTimeLeft:e}=P(O,n);return k(m,e),a.jsxs("div",{className:y.content,children:[a.jsx(w,{leftIsActive:o,handleClick:()=>{c(!o)}}),o?a.jsxs(a.Fragment,{children:[a.jsx(x,{timerState:m,setTimer:s,toggleTimer:t,resetTimer:i}),a.jsx(p,{log:r[r.length-1]})]}):a.jsx(b,{logsState:r})]})};D.__docgenInfo={description:"",methods:[],displayName:"Pomodoro"};const z={title:"Components/011-13-01-2025-react-katas/Pomodoro",component:D,parameters:{layout:"fullscreen"}},g={args:{}};var _,T,h;g.parameters={...g.parameters,docs:{...(_=g.parameters)==null?void 0:_.docs,source:{originalSource:`{
  args: {}
}`,...(h=(T=g.parameters)==null?void 0:T.docs)==null?void 0:h.source}}};const B=["Default"];export{g as Default,B as __namedExportsOrder,z as default};
